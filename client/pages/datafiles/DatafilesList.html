<template name="DatafilesList">
  <h4>Eye Tracking Data Files
    {{#if datafiles.count}}
      ({{datafiles.count}})

      {{#if study.allDatafilesProcessed}}
        <span class="label label-success">All Processed</span>
      {{else}}
        <span class="label label-default">Datafiles Processing
          <i class="fa fa-spinner fa-pulse fa-fw"></i>
        </span>
      {{/if}}
    {{/if}}
  </h4>
  <ul>
    {{#each datafile in datafiles}}
      <li>
        {{#if datafile.preprocessing}}
          <span class="label label-default">
            Pre-processing
            <i class="fa fa-spinner fa-pulse fa-fw"></i></span>
        {{/if}}
        {{#if datafile.processing}}
          <span class="label label-default">
            Processing
            <i class="fa fa-spinner fa-pulse fa-fw"></i></span>
        {{/if}}
        {{#if datafile.processed}}
          <span class="label label-success">Processed</span>
        {{/if}}

        <a href="/studies/{{study._id}}/datafiles/{{datafile._id}}" target="_top">{{datafile.name}}</a>

        {{#if datafile.recordings}}
          ({{formatNumber datafile.recordings}} fixations)
        {{/if}}
      </li>
    {{/each}}
  </ul>
</template>
