<template name="Analysis">
  {{#if $.Session.get 'updateAnalysis'}}
    {{> UpdateAnalysis analysis=analysis}}
  {{/if}}
  <h3>{{analysis.name}}
    {{#if analysis.hasPermission 'update'}}
      {{#unless $.Session.get 'updateAnalysis'}}
        &nbsp;<a href="#" class="update-analysis"><i class="fa fa-pencil"></i></a>
      {{/unless}}
    {{/if}}
  </h3>

  <p>{{analysis.desc}}</p>

  {{#if analysis.period}}
  <div><strong>Period (ms):</strong> {{formatNumber analysis.period}}</div>
  {{/if}}
  
  {{#if analysis.viewingGap}}
  <div><strong>Viewing Gap (ms):</strong> {{formatNumber analysis.viewingGap}}</div>
  {{/if}}

  {{#if analysis.minViewingTime}}
    <div><strong>Minimum Viewing Time (ms):</strong> {{formatNumber analysis.minViewingTime}}</div>
  {{/if}}

  <div><strong>Areas of Interest:</strong>
    {{#each aoi in aois}}
      <a href="/studies/{{study._id}}/aois/{{aoi._id}}">{{aoi.name}}</a>
    {{/each}}
  </div>

  <h4>Viewings {{#if viewings.count}}({{viewings.count}}){{/if}}</h4>

  {{> tabular table=TabularTables.ViewingsByAnalysisId selector=selector class="table table-striped table-bordered"}}

</template>
