<template name="UpdateAnalysis">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">
        Edit Analysis <i class="fa fa-close pull-right"></i>
      </h3>
    </div>
    <div class="panel-body">
      {{#autoForm collection="Analyses" doc=analysis id="updateAnalysisForm" type="update"
        class="update-analysis-form"}}
      {{> afQuickField name="name"}}
      {{> afQuickField name="desc"}}
      <div class="row">
        <div class="col-xs-12 col-sm-6 col-md-4">
          {{> afQuickField name="type" class="typeSelector"}}
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4">
          {{> afQuickField name="minVisitDuration"}}
        </div>
        {{#if showMGGDField}}
          <div class="col-xs-12 col-sm-6 col-md-4">
            {{> afQuickField name="maxVisitGapDuration"}}
          </div>
        {{/if}}
      </div>
      <!-- {{> afQuickField name="ignoreAoiNoName"}} -->
      {{> afQuickField name="ignoreOutsideImage"}}
      {{> afQuickField name="studyId"}}
      {{> afQuickField name="participantIds" options=participantOptions value=analysis.participantIds}}
      {{> afQuickField name="stimulusIds" options=stimulusOptions value=analysis.stimulusIds}}
      <div class="form-group">
        <button type="submit" class="btn btn-primary">Submit</button>
      </div>
      {{/autoForm}}

      {{#if analysis.hasPermission 'destroy'}}
      {{> quickRemoveButton collection="Analyses" _id=analysis._id
          onSuccess=deleteOnSuccess onError=deleteOnSuccess
          beforeRemove=deleteBeforeRemove
          id="destroyAnalysisform" class="btn btn-danger"}}
      {{/if}}
    </div>
  </div>
</template>
