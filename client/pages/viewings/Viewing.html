<template name="Viewing">
  {{#if Template.subscriptionsReady}}
    {{#if $.Session.get 'updateViewing'}}
      {{> UpdateViewing viewing=viewing}}
    {{else}}
      <h3 class="m-t-0">Viewing #{{viewing.number}}</h3>
      <p>
        <div>
          <strong>Datafile:</strong>
          <a href="">{{viewing.datafileName}}</a>
        </div>
        <div>
          <strong>Area of Interest:</strong>
          <a href="/studies/{{viewing.studyId}}/aois/{{viewing.aoi._id}}">{{viewing.aoiName}}</a>
        </div>
        <div>
          <strong>Period (ms):</strong>
          {{#if viewing.analysis}}
            {{formatNumber viewing.analysis.period}}
          {{/if}}
        </div>
        <div>
          <strong>Minimum Recording Time (ms): </strong>
          {{#if viewing.duration}}
            {{formatNumber viewing.minRecordingTime}}
          {{/if}}
        </div>
        <div>
          <strong>Maximum Recording Time (ms): </strong>
          {{#if viewing.duration}}
            {{formatNumber viewing.maxRecordingTime}}
          {{/if}}
        </div>
        <div>
          <strong>Duration (HH:MM:SS.MS): </strong>
          {{#if viewing.duration}}
            {{millisecondsToHMSMS viewing.duration}}
          {{/if}}
        </div>
      </p>

      <form>
        <div class="form-group" id="analysisTypeGroup">
          <label for="analysisType">Analysis Type</label>
          <select class="form-control" id="analysisType">
            <option disabled selected value="">Analysis Type</option>
            <option value="convexHull">Convex Hull Areas</option>
            <option disabled value="scanpathLength">Scanpath Length</option>
            <option disabled value="scanpathVelocity">Scanpath Velocity</option>
          </select>
        </div>

        <div id="instantContinuousGroup" class="form-group {{#if instantContinuousHidden}} hidden {{/if}}">
          <label for="instantContinuous">Instantaneous/Continuous
            <a href="#">
              <span class="glyphicon glyphicon-question-sign"></span>
            </a>
          </label>
          <select class="form-control" id="instantContinuous">
            <option value="instantaneous">Instantaneous</option>
            <option value="continuous">Continuous</option>
          </select>
        </div>

        <div id="slideStepGroup" class="form-group {{#if slideStepHidden}} hidden {{/if}}">
          <label for="slideStep">Slide/Step
            <a href="#">
              <span class="glyphicon glyphicon-question-sign"></span>
            </a>
          </label>
          <select class="form-control" id="slideStep">
            <option value="slide">Slide</option>
            <option value="step">Step</option>
          </select>
        </div>

        <div id="centroidPeriodGroup" class="form-group {{#if centroidPeriodHidden}} hidden {{/if}}">
          <label for="centroidPeriod">Centroid Period (ms)
            <a href="#">
              <span class="glyphicon glyphicon-question-sign"></span>
            </a>
          </label>
          <input class="form-control" type="text" placeholder="Centroid Period" id="centroidPeriod" value="{{$.Session.get 'centroidPeriod'}}">
        </div>

        <div id="fixationTrailLengthGroup" class="form-group {{#if fixationTrailLengthHidden}} hidden {{/if}}">
          <label for="fixationTrailLength">Fixation Trail Length
            <a href="#">
              <span class="glyphicon glyphicon-question-sign"></span>
            </a>
          </label>
          <input class="form-control" type="text" placeholder="Fixation Trail Length" id="fixationTrailLength" value="{{$.Session.get 'fixationTrailLength'}}">
        </div>
      </form>

      {{> Animation viewingId=viewing._id}}

      <!-- <h4>Recordings {{#if recordings.count}}({{recordings.count}}){{/if}}</h4>
      {{> tabular table=TabularTables.RecordingsByViewing selector=selector class="table table-striped table-bordered"}} -->
    {{/if}}
  {{/if}}
</template>
